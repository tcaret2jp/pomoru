# ポモドーロタイマー アプリケーション要件定義書

## 1. 概要

「シンプルかつモダン」をコンセプトにした、ユーザーが集中して作業に取り組めるためのポモドーロタイマーアプリケーション。

## 2. ターゲットユーザー

- 集中力を維持したい学生やエンジニア
- シンプルなツールを好むミニマリスト
- ブラウザ上で手軽にポモドーロテクニックを使いたい人

## 3. 機能要件

### 3.1. タイマー機能

- **ポモドーロサイクル**: 作業（25分）、短い休憩（5分）、長い休憩（15分）の切り替え。
- **カウントダウン**: 秒単位でのタイマー表示。
- **操作**: スタート、一時停止、リセット機能。
- **通知**: タイマー終了時のアラート音およびブラウザ通知。
- **オフライン・スリープ対応**: 端末がオフライン、スリープ、または画面ロック状態であっても、1秒の狂いなく正確に計測を継続する。
- **集中継続（Flow Mode）ダイアログ**:
  - 作業（Work）セッション終了時に、自動で切り替えるのではなくユーザーに次のアクションを選択させるポップアップを表示。
  - **アクション選択**:
    - **休憩する**: 休憩セッションへ移行。
    - **延長する（+5分）**: 集中が続いている場合、現在の作業時間を即座に5分延長して継続する。
    - **終了する**: タイマーをリセットし、待機状態に戻る。
  - **超過時間の可視化**: 延長した時間は「ボーナスタイム」として認識し、ユーザーの集中度をポジティブに評価する。

### 3.2. 設定機能

- **時間調整**: 各サイクル（作業、短い休憩、長い休憩）の時間をユーザーが秒または分単位で変更可能。
- **自動開始設定**: 休憩終了後に自動で次の作業セッションを開始、または作業終了後に自動で休憩を開始する設定。
- **サウンド設定**: アラーム音のオン/オフや音量調整。
- **UI/UX**: 設定ボタン（⚙️）をクリックするとモーダルが表示され、設定内容が即座に反映される（ローカル保存またはDB同期）。

### 3.3. 統計・進捗（オプション/フェーズ2）

- 今日の完了ポモドーロ数のカウント。
- Notion 連携によるタスクごとの作業時間記録。

## 4.1. 機能要件

- **レスポンシブデザイン**: PC、タブレット、スマートフォン全てのデバイスで快適に利用できること。
- **タスク連携**: Notionのデータベースと連携し、タスクの進捗を管理できること。
- **統計機能**: 基本的な統計はWeb上で確認出来るようにし、詳細な統計はNotionのデータベースに保存出来るようにする。
- **アカウント機能**: Googleアカウントでログイン出来るようにする。また、統計機能とタスク連携機能はアカウントに紐づける。
- **プレミアム機能**: 本サービスでは、無料プランと複数の有料プラン（サブスクリプション形式）を提供します。ログインは推奨していますが、必須ではありません。未ログイン状態でも、タイマー機能や**一時的な時間調整**は利用できます。ただし、統計機能、タスク連携機能、および**設定の永続化（クラウド保存）**にはログインが必要です。ログインしたユーザーは、統計機能、タスク連携機能、時間調整（永続保存）をすべて利用できます。プレミアム機能については、有料プランに加入しているユーザーのみが利用可能です。

## 4.2. 非機能要件

- **アクセシビリティ**: 視認性の高いフォントとコントラスト比。アイコンの代わりに視認性の高い絵文字（Emoji）を採用可能。
- **パフォーマンス**: 高速な読み込みとスムーズなアニメーション。

## 5. 技術スタック

- **Frontend**: Next.js (App Router), TypeScript
- **Styling**: Tailwind CSS (v4)
- **State Management**: React Hooks (useState, useEffect, useReducer), SWR
- **Deployment**: Vercel (想定)

## 6. UI/UX デザイン案

- **カラーパレット**:
  - 背景: ライトモードをデフォルトとしたモダンな配色にする。ダークモードも用意する。
- **レイアウト**:
  - 中央に大きなタイマー表示（JetBrains Mono）。
  - 下部に操作パネル（左右対称レイアウト：左にリセット 🔄、中央に開始/停止 ▶️/⏸️、右に設定 ⚙️）。
  - タイマーの周囲に円形のプログレスバー（進行状況に合わせてアニメーション）。
  - 設定や統計はモーダル形式で表示し、タイマーの集中を妨げないようにする。
